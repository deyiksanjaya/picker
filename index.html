<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monumen Bersejarah Dunia</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Menggunakan font Inter sebagai default */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Latar belakang gelap untuk nuansa premium */
        }
        /* Style untuk efek transisi pada card */
        .monument-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            transform: scale(1);
        }
        .monument-card:hover {
            transform: scale(1.03);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
        }
        /* Animasi fade-in untuk elemen yang dimuat */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        /* Overlay untuk memblokir sentuhan */
        #touch-blocker {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            display: none; /* Awalnya disembunyikan */
        }
        /* Overlay untuk izin awal */
        #permission-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(17, 24, 39, 0.95);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: opacity 0.5s ease;
        }
    </style>
</head>
<body class="antialiased text-white">

    <!-- Overlay untuk meminta izin interaksi awal -->
    <div id="permission-overlay">
        <div class="px-4">
            <h2 class="text-3xl font-bold">Selamat Datang</h2>
            <p class="mt-2 text-lg text-gray-300">Ketuk di mana saja untuk memulai perjalanan Anda.</p>
        </div>
    </div>
    
    <!-- Overlay untuk memblokir sentuhan saat HP terbalik -->
    <div id="touch-blocker"></div>

    <!-- Section Hero -->
    <header class="relative h-96 flex items-center justify-center text-center overflow-hidden">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1528181304800-259b08848526?q=80&w=2070&auto=format&fit=crop" alt="Latar Belakang Monumen" class="w-full h-full object-cover opacity-30">
        </div>
        <div class="absolute inset-0 bg-black/50 z-10"></div>
        <div class="relative z-20 px-4">
            <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight">Keajaiban Dunia</h1>
            <p class="mt-4 text-lg md:text-xl text-gray-300 max-w-2xl mx-auto">Sebuah perjalanan visual melintasi waktu, menjelajahi mahakarya arsitektur yang mendefinisikan peradaban manusia.</p>
        </div>
    </header>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">
        <!-- Container untuk loading state -->
        <div id="loading" class="text-center py-16">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-400"></div>
            <p class="mt-4 text-gray-400">Sedang menyusun perjalanan Anda...</p>
        </div>

        <!-- Container untuk layout grid asimetris -->
        <main id="monuments-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 auto-rows-[25rem] gap-6">
            <!-- Card monumen akan dimasukkan di sini oleh JavaScript -->
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const monumentsContainer = document.getElementById('monuments-container');
            const loadingIndicator = document.getElementById('loading');
            const permissionOverlay = document.getElementById('permission-overlay');
            const touchBlocker = document.getElementById('touch-blocker');

            // --- Logika Giroskop ---
            let gyroTriggered = false; // Memastikan fitur gyro hanya berjalan sekali
            let isFaceDown = false;

            const handleOrientation = (event) => {
                // event.beta adalah sudut kemiringan depan-ke-belakang (-180 hingga 180)
                // Ketika layar menghadap ke bawah, beta mendekati 180 atau -180
                const beta = event.beta;

                if (gyroTriggered) {
                    return; // Hentikan jika sudah pernah dipicu
                }
                
                // Cek jika HP menghadap ke bawah
                if (!isFaceDown && (beta > 170 || beta < -170)) {
                    isFaceDown = true;
                    
                    const statueOfLibertyCard = document.getElementById('monument-card-Statue-of-Liberty');
                    if (statueOfLibertyCard) {
                        statueOfLibertyCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                    touchBlocker.style.display = 'block'; // Aktifkan blokir sentuhan
                } 
                // Cek jika HP kembali ke posisi normal setelah menghadap ke bawah
                else if (isFaceDown && (beta < 160 && beta > -160)) {
                    isFaceDown = false;
                    gyroTriggered = true; // Tandai bahwa fitur sudah digunakan
                    touchBlocker.style.display = 'none'; // Nonaktifkan blokir sentuhan
                    
                    // Hentikan listener untuk menghemat baterai dan mencegah pemicu berulang
                    window.removeEventListener('deviceorientation', handleOrientation, true);
                }
            };

            const requestGyroPermission = () => {
                if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                    // Ini untuk iOS 13+
                    DeviceOrientationEvent.requestPermission()
                        .then(permissionState => {
                            if (permissionState === 'granted') {
                                window.addEventListener('deviceorientation', handleOrientation, true);
                            }
                        })
                        .catch(console.error);
                } else {
                    // Untuk browser lain yang tidak memerlukan izin eksplisit
                    window.addEventListener('deviceorientation', handleOrientation, true);
                }
            };
            
            permissionOverlay.addEventListener('click', () => {
                permissionOverlay.style.opacity = '0';
                setTimeout(() => {
                    permissionOverlay.style.display = 'none';
                }, 500);
                requestGyroPermission();
            }, { once: true });


            // --- Logika Pemuatan Monumen ---
            const monumentList = [
                "Colosseum", "Great Wall of China", "Taj Mahal", "Machu Picchu", "Petra", "Eiffel Tower",
                "Statue of Liberty", "Angkor Wat", "Borobudur", "Acropolis of Athens", "Chichen Itza",
                "Christ the Redeemer (statue)", "Neuschwanstein Castle", "Sydney Opera House", "Forbidden City",
                "Hagia Sophia", "Prambanan", "Leaning Tower of Pisa", "Brandenburg Gate", "Himeji Castle", "Sagrada FamÃ­lia",
            ];

            const fetchMonumentData = async (monumentName) => {
                const apiUrl = `https://en.wikipedia.org/w/api.php?action=query&format=json&prop=pageimages&piprop=thumbnail&pithumbsize=800&titles=${encodeURIComponent(monumentName)}&origin=*`;
                try {
                    const response = await fetch(apiUrl);
                    if (!response.ok) throw new Error('Network response was not ok');
                    const data = await response.json();
                    const pages = data.query.pages;
                    const pageId = Object.keys(pages)[0];
                    if (pageId === "-1") return null;
                    const pageData = pages[pageId];
                    return {
                        title: pageData.title,
                        imageUrl: pageData.thumbnail ? pageData.thumbnail.source : 'https://placehold.co/800x600/111827/4b5563?text=Gambar+Tidak+Tersedia'
                    };
                } catch (error) {
                    console.error(`Gagal mengambil data untuk ${monumentName}:`, error);
                    return null;
                }
            };

            const createMonumentCard = (monument, index) => {
                if (!monument) return '';
                
                const uniqueId = `monument-card-${monument.title.replace(/[^a-zA-Z0-9]/g, '-')}`;
                const wikipediaUrl = `https://en.wikipedia.org/wiki/${encodeURIComponent(monument.title)}`;
                const isFeatured = index === 0;
                const gridClasses = isFeatured ? 'lg:col-span-2 lg:row-span-2' : 'lg:col-span-1 lg:row-span-1';
                const titleFontSize = isFeatured ? 'text-4xl' : 'text-2xl';

                return `
                    <div id="${uniqueId}" class="monument-card fade-in group relative rounded-2xl overflow-hidden cursor-pointer ${gridClasses}" style="animation-delay: ${index * 100}ms;" onclick="window.open('${wikipediaUrl}', '_blank')">
                        <img src="${monument.imageUrl}" alt="Gambar ${monument.title}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onerror="this.onerror=null;this.src='https://placehold.co/800x600/111827/4b5563?text=Gagal+Muat';">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"></div>
                        <div class="absolute bottom-0 left-0 p-6 w-full">
                            <h2 class="${titleFontSize} font-bold tracking-tight">${monument.title}</h2>
                            <button class="mt-2 text-left opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white/20 backdrop-blur-sm text-white font-semibold py-2 px-4 rounded-lg hover:bg-white/30">
                                Jelajahi &rarr;
                            </button>
                        </div>
                    </div>
                `;
            };

            const loadMonuments = async () => {
                loadingIndicator.style.display = 'block';
                monumentsContainer.innerHTML = '';

                const monumentDataPromises = monumentList.map(fetchMonumentData);
                const monumentsData = await Promise.all(monumentDataPromises);
                
                loadingIndicator.style.display = 'none';

                monumentsData.forEach((monument, index) => {
                    if (monument) {
                        monumentsContainer.innerHTML += createMonumentCard(monument, index);
                    }
                });
            };

            loadMonuments();
        });
    </script>

</body>
</html>